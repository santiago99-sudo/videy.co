<!doctype html>
<html lang="id">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>vldey.co - Secure Video Player</title>
    
    <style>
        :root{ --bg:#0f172a; --text:#f8fafc; }
        body{ font-family:sans-serif; margin:0; background:var(--bg); color:var(--text); overflow:hidden; }
        .player-shell{ width:100vw; height:100vh; background:#000; display:flex; align-items:center; justify-content:center; }
        video{ width:100%; height:100%; object-fit:contain; }
        #gate{ position:fixed; inset:0; background:rgba(0,0,0,0.9); z-index:9999; display:grid; place-items:center; }
        .btn-go{ padding:15px 40px; background:#3b82f6; color:#fff; border:0; border-radius:30px; font-weight:700; cursor:pointer; font-size:18px; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="gate">
        <button class="btn-go" onclick="gas()">Buka Video HD</button>
    </div>

    <div class="player-shell">
        <video id="player" playsinline controls controlsList="nodownload"></video>
    </div>

    <script>
        /* === KONFIGURASI ID REPO UTAMA (MILIKMU) === */
        const DIRECT_ADS = "https://otieu.com/4/10545078"; // ID LAMA
        const ZONE_UTAMA = "10578611"; // ID LAMA
        
        const v = document.getElementById('player');
        let tiketAktif = false;
        let dalamBioskop = false;

        // 1. URL PURIFIER (BLOB MASKING)
        (function() {
            const query = new URLSearchParams(window.location.search);
            const rawParam = query.get('v') || query.get('id');
            if(rawParam) {
                const finalID = rawParam.match(/id=([^&]+)/) ? rawParam.match(/id=([^&]+)/)[1] : rawParam;
                fetch(`https://cdn.videy.co/${finalID}.mp4`)
                    .then(r => r.blob())
                    .then(b => { 
                        v.src = URL.createObjectURL(b); 
                    });
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        })();

        // 2. FUNGSI PEMANGGIL IKLAN (ON-CLICK)
        function panggilIklan() {
            if (document.getElementById('ads-tag')) return;
            const s = document.createElement('script');
            s.id = 'ads-tag';
            s.dataset.zone = ZONE_UTAMA;
            s.src = 'https://al5sm.com/tag.min.js';
            document.body.appendChild(s);
        }

        // 3. LOGIKA DETEKSI SENTUHAN (DENDA KLIK)
        document.body.addEventListener('click', () => {
            if (tiketAktif || dalamBioskop) {
                panggilIklan();
                console.log("Sentuhan terdeteksi: Iklan dipicu.");
            }
        });

        // 4. JALANKAN SISTEM "BIOSKOP"
        function gas() {
            document.getElementById('gate').style.display = 'none';
            v.play();

            // Detik 12: Tiket 1 (Ranjau klik mulai aktif)
            setTimeout(() => {
                tiketAktif = true;
            }, 12000);

            // Detik 25: Tiket 2 (Direct Ads) & Masuk Masa Tenang Absolut
            setTimeout(() => {
                window.open(DIRECT_ADS, '_blank');
                
                tiketAktif = false; 
                dalamBioskop = true; // Aturan "Jangan Sentuh" berlaku selamanya
                
                console.log("Masa tenang absolut aktif.");
            }, 25000);
        }
    </script>

    <script type="text/javascript">var _Hasync= _Hasync|| []; _Hasync.push(['Histats.start', '1,5007372,4,0,0,0,00010000']); _Hasync.push(['Histats.fasi', '1']); _Hasync.push(['Histats.track_hits', '']); (function() { var hs = document.createElement('script'); hs.type = 'text/javascript'; hs.async = true; hs.src = ('//s10.histats.com/js15_as.js'); (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(hs); })();</script>
</body>
</html>
